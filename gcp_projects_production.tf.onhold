# ---------------------------------------------------------------------------------------------------------------------
# Foundation Layer
# GCP Projects
# ensures GCP Projects per Infrastructure Environment
# for the Foundation Layer development environment, ensure a random prefix is included to avoid naming collisions
# and naming reservations.  GCP Projects are long lived naming reservations.
# the cloud foundation toolkit addresses the naming collisions
# ---------------------------------------------------------------------------------------------------------------------
# production environment
module "project-factory" {
  source = "terraform-google-modules/project-factory/google"
  version = "~> 6.0"

  name  = "iq9-prod-bigbarkozspeedshop"
  folder_id = "data.gcp_folder_production_env.id"
  org_id  = "${var.gcp_org_id}"
  billing_account = "${var.gcp_org_billing_account}"
  lien = "true"
  random_project_id = "true"
  usage_bucket_name  = "iq9-prod-bigbarkozspeedshop-usage-reporting-bucket"
  usage_bucket_prefix = "iq9/production/bigbarkozspeedshop"
  shared_vpc  = "iq9-prod-shared-host-vpc"

  shared_vpc_subnets = [
    "project/iq9-prod-bigbarkozspeedshop/regions/us-west1/subnetworks/default",
  ]
  
}


projects/$project_id/regions/$region/subnetworks/$subnet_id